<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="dark">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Console | Hack Stark ×͜×</title>
<meta name="keywords" content="Linux, Web-Enumeration, Port-Forwarding, TLS-Inspection, RCE, Sudo-Privileges, SUID">
<meta name="description" content="Writeup de la máquina Console en HackMyVM.">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/writeups/hackmyvm/console/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fd5566c526ae48aadabd950798a2dc3568536401560eae5caac3765a42a9e7b5.css" integrity="sha256-/VVmxSauSKravZUHmKLcNWhTZAFWDq5cqsN2WkKp57U=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/writeups/hackmyvm/console/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><link rel='stylesheet' href='/css/custom.css'>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

<script src="/js/main.js" defer></script>

<link rel="icon" type="image/png" href="/images/logo.png">
<link rel="apple-touch-icon" href="/images/logo.png">
<link rel="shortcut icon" href="/images/logo.png">
<meta name="theme-color" content="#2E3440">

</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Hack Stark ×͜× (Alt + H)">Hack Stark ×͜×</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/writeups/" title="WriteUps">
                    <span>WriteUps</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<div class="post-container">
  <article class="post-single">
    <header class="post-header">
      
      <h1 class="post-title entry-hint-parent">
        Console
      </h1>
      <div class="post-description">
        Writeup de la máquina Console en HackMyVM.
      </div>
      <div class="post-meta"><span title='2025-12-05 00:00:00 +0000 UTC'>December 5, 2025</span>&nbsp;·&nbsp;<span>5 min</span>

</div>

      <br />

      <h4>Tags:</h4>

      <br />
      <ul class="post-tags">
        <li><a href="http://localhost:1313/tags/linux/">Linux</a></li>
        <li><a href="http://localhost:1313/tags/web-enumeration/">Web-Enumeration</a></li>
        <li><a href="http://localhost:1313/tags/port-forwarding/">Port-Forwarding</a></li>
        <li><a href="http://localhost:1313/tags/tls-inspection/">TLS-Inspection</a></li>
        <li><a href="http://localhost:1313/tags/rce/">RCE</a></li>
        <li><a href="http://localhost:1313/tags/sudo-privileges/">Sudo-Privileges</a></li>
        <li><a href="http://localhost:1313/tags/suid/">SUID</a></li>
      </ul>
    </header> 
    <div class="post-content"><script>
  window.location.replace("https://starkhack.netlify.app/writeup/hackmyvm/console");
</script>
<h1 id="enumeración">Enumeración<a hidden class="anchor" aria-hidden="true" href="#enumeración">#</a></h1>
<p>Vamos a comenzar realizando un escaneo en red para identificar la máquina víctima con ayuda de <strong>Arp-Scan</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>arp-scan -I ens33 --localnet --ignoredups
</span></span></code></pre></div><p><img alt="img1" loading="lazy" src="/img/Pasted%20image%2020251202171356.png"></p>
<p>Como podemos observar, la IP de la máquina es la <code>192.168.1.66</code>.</p>
<p>Ahora, con ayuda del comando <code>ping</code> vamos a identificar un poco el sistema operativo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ping -c <span style="color:#ae81ff">1</span> 192.168.1.66
</span></span></code></pre></div><p><img alt="img2" loading="lazy" src="/img/Pasted%20image%2020251202171603.png"></p>
<p>Podemos observar un <code>ttl=64</code> donde asumimos un sistema Linux.</p>
<p>Ya en este punto realizamos un escaneo con ayuda de <strong>Nmap</strong> para detectar puertos abiertos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nmap -p- --open -sS --min-rate <span style="color:#ae81ff">5000</span> -n -v -Pn 192.168.1.66 -oG allPorts
</span></span></code></pre></div><p><img alt="img3" loading="lazy" src="/img/Pasted%20image%2020251202171916.png"></p>
<p>Observamos los puertos <code>22,80 y 443</code> abiertos, ahora vamos a intentar extraer la máxima información posible de estos 3 puertos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nmap -p22,80,443 -sCV 192.168.1.66 -oN target
</span></span></code></pre></div><p><img alt="img4" loading="lazy" src="/img/Pasted%20image%2020251202172406.png"></p>
<p>Podemos observar versiones y en algunas de estas vemos también que parece ser un Debian, esto es útil a final de cuentas, ya que nos asegura si ser un sistema Linux por lo menos.</p>
<p>Bueno vamos a visitar primero la web que está corriendo por el puerto 80 a ver que es lo que logramos encontrar:</p>
<p><img alt="img5" loading="lazy" src="/img/Pasted%20image%2020251202172612.png"></p>
<p>Vemos esta web, pero nada más ni en el código fuente.</p>
<p>Recordemos que tenemos en el puerto <code>443</code> corriendo el servicio https por lo que vamos a intentar ingresar:</p>
<p><img alt="img6" loading="lazy" src="/img/Pasted%20image%2020251202173029.png"></p>
<p>Observamos que no nos carga la web, ahora recordemos que https utiliza el protocolo TLS vamos a intentar inspeccionar dicho certificado en busca de más información con ayuda de <strong>sslscan</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sslscan 192.168.1.66
</span></span></code></pre></div><p><img alt="img7" loading="lazy" src="/img/Pasted%20image%2020251202173656.png"></p>
<p>Si vemos en el resultado nos lista un dominio, podemos intentar al ser un servicio local integrarlo en el <code>/etc/hosts</code> para que mediante el mismo cargue la web mediante el servicio <code>https</code>.</p>
<p>Ya con eso editado entramos a la web:
<img alt="img8" loading="lazy" src="/img/Pasted%20image%2020251202173906.png"></p>
<p>En esta web vemos varias cosas pero, en realidad por el momento nada me sirve, lo que vamos a hacer es verificar los scripts que está cargando, si podemos leer su código fuente vamos a ver alguna forma de aprovecharlo.</p>
<p><img alt="img9" loading="lazy" src="/img/Pasted%20image%2020251202174401.png"></p>
<p>Entre todos los scripts el de <code>hacker.js</code> es el que nos llama la atención y vamos a analizarlo:</p>
<p><img alt="img10" loading="lazy" src="/img/Pasted%20image%2020251202174616.png"></p>
<h1 id="explotación">Explotación<a hidden class="anchor" aria-hidden="true" href="#explotación">#</a></h1>
<p>En este pequeño trozo de código podemos ver lo que al parecer es una ruta que sería <code>supercoool.php</code>, además de que al parecer podemos pasarle el parámetro <code>cmd</code> y darle un valor, vemos que sucede:</p>
<p><img alt="img11" loading="lazy" src="/img/Pasted%20image%2020251202174932.png"></p>
<p>Como vemos ejecuta comandos por lo que de forma directa vamos a intentar entablar una reverse shell para tomar control de la máquina:</p>
<p><img alt="img12" loading="lazy" src="/img/Pasted%20image%2020251202175159.png"></p>
<p>Ya con la conexión lista vamos a darle tratamiento y a comenzar con la enumeración del sistema.</p>
<p>No encontramos permisos SUID y tampoco tareas cron, lo que si logramos listar gracias a las carpetas del directorio <code>home</code> y a la información del archivo <code>/etc/passwd</code> es los usuario disponibles:</p>
<p><img alt="img13" loading="lazy" src="/img/Pasted%20image%2020251202175534.png"></p>
<p><img alt="img14" loading="lazy" src="/img/Pasted%20image%2020251202175623.png"></p>
<p>Podemos ver los usuarios, en este punto vamos a revisar sus directorios en busca de pistas o credenciales:</p>
<p><img alt="img15" loading="lazy" src="/img/Pasted%20image%2020251202175722.png"></p>
<p>Vemos dos archivos, uno el <code>user.txt</code> que contiene flag del usuario y otro que es el <code>.viminfo</code> el cual vemos su contenido:</p>
<p><img alt="img16" loading="lazy" src="/img/Pasted%20image%2020251202175828.png"></p>
<p>Observamos las credenciales del usuario welcome <code>welcome:welcome123</code> por lo que vamos a cambiar de usuario:</p>
<p><img alt="img17" loading="lazy" src="/img/Pasted%20image%2020251202180355.png"></p>
<p>Perfecto ahora también se analizó el uso de tareas cron y permisos SUID, pero no encontramos nada, algo más que encontramos extraño es al revisar los puertos:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ss -nltp
</span></span></code></pre></div><p><img alt="img18" loading="lazy" src="/img/Pasted%20image%2020251202180616.png"></p>
<p>Vemos el puerto <code>5000</code> abierto de forma interna. En este punto podemos intentar hacer Port forwarding para poder externalizar el puerto, como tenemos credenciales lo más sencillo es hacerlo con ayuda de ssh de la siguiente manera:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh welcome@192.168.1.66 -L 80:192.168.1.66:5000
</span></span></code></pre></div><p><img alt="img19" loading="lazy" src="/img/Pasted%20image%2020251202181105.png"></p>
<p>Ya con esto y conectados si revisamos nuestro puerto <code>80</code> vamos a ver que está abierto:</p>
<p><img alt="img20" loading="lazy" src="/img/Pasted%20image%2020251202181209.png"></p>
<p>Perfecto, podemos intentar escanear con ayuda de <strong>Nmap</strong> el puerto para ver que encontramos:</p>
<p><img alt="img21" loading="lazy" src="/img/Pasted%20image%2020251202181358.png"></p>
<p>Vemos que está corriendo una web y en esta se implementa python.</p>
<p>Veamos la web:</p>
<p><img alt="img22" loading="lazy" src="/img/Pasted%20image%2020251202181527.png"></p>
<p>En esta web creamos y publicamos una especie de post y es vulnerable a XSS, pero nada más, lo que podemos hacer en este punto es buscar por más rutas y esto con ayuda de <strong>Gobuster</strong> :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gobuster dir -u http://127.0.0.1 -w &lt;diccionario&gt;
</span></span></code></pre></div><p><img alt="img23" loading="lazy" src="/img/Pasted%20image%2020251202181728.png"></p>
<p>vemos esa ruta <code>console</code>:</p>
<p><img alt="img24" loading="lazy" src="/img/Pasted%20image%2020251202181806.png"></p>
<p>Vemos el mensaje donde nos dice que necesitamos el ping que se proporcionó al lanzar la web, pero esto no lo tenemos.</p>
<p>Regresando a la terminal encontramos que tenemos una ejecución de comandos con <code>sudo</code>:</p>
<p><img alt="img25" loading="lazy" src="/img/Pasted%20image%2020251202181935.png"></p>
<p>Podemos ver unos logs, vemos lo que es:</p>
<p><img alt="img26" loading="lazy" src="/img/Pasted%20image%2020251202182031.png"></p>
<p>Como podemos observar si son <code>logs</code>, pero no sabemos referente a qué web son, podemos intentar enviar cualquier cosa como ping en la web a ver si logramos verlo en los logs:</p>
<p><img alt="img27" loading="lazy" src="/img/Pasted%20image%2020251202182133.png">
<img alt="img28" loading="lazy" src="/img/Pasted%20image%2020251202182156.png"></p>
<p>En efecto, los logs son de esta web.</p>
<p>Ahora si lo pensamos un poco nos habla de que al levantar el servidor nos brinda el pin, podemos intentar filtrar solo las primeras líneas a ver si logramos verlo:</p>
<p><img alt="img29" loading="lazy" src="/img/Pasted%20image%2020251202182320.png"></p>
<p>Vemos el pin, vamos a usarlo para desbloquear la terminal:</p>
<p><img alt="img30" loading="lazy" src="/img/Pasted%20image%2020251202182406.png"></p>
<p>Lo que tenemos es una consola en python que al parecer no tiene restricciones, pero no le agrandan comandos largos, vamos a hacer uso de <code>bosybox</code> para generarnos una reverse shell desde esta consola de la siguiente manera:</p>
<p><img alt="img31" loading="lazy" src="/img/Pasted%20image%2020251202183529.png">
<img alt="img32" loading="lazy" src="/img/Pasted%20image%2020251202183542.png"></p>
<p>Volvemos a hacer un tratamiento a la <code>tty</code> para maniobrar mejor y tendríamos:</p>
<p><img alt="img33" loading="lazy" src="/img/Pasted%20image%2020251202183654.png"></p>
<h1 id="escalada-de-privilegios">Escalada de Privilegios<a hidden class="anchor" aria-hidden="true" href="#escalada-de-privilegios">#</a></h1>
<p>Listo ya estamos como el usuario <code>qaq</code> en este punto volvemos a hacer reconocimiento y al ejecutar el comando <code>sudo -l</code> vemos:</p>
<p><img alt="img34" loading="lazy" src="/img/Pasted%20image%2020251202183738.png"></p>
<p>Podemos ejecutar el comando <code>fastfetch</code> como administrador.</p>
<p>Esto no es algo común, pero tenemos que saber investigar, nosotros podemos moldear un archivo de configuración de <code>fastfetch</code> y dentro de este al parecer para dar cierta apariencia o ver cierto resultado, lo que se hace es ejecutar comandos, ya con esto claro entendemos por donde ir.</p>
<p>Vamos primero a generar su archivo de configuración con:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>fastfetch --gen-config
</span></span></code></pre></div><p><img alt="img35" loading="lazy" src="/img/Pasted%20image%2020251202184201.png"></p>
<p>Como vemos nos da la ruta donde se generó el archivo, podemos abrir dicho archivo y veremos lo siguiente:</p>
<p><img alt="img36" loading="lazy" src="/img/Pasted%20image%2020251202184615.png"></p>
<p>Agregamos un nuevo módulo con el cual ejecutamos comandos, y vemos si funciono:</p>
<p><img alt="img37" loading="lazy" src="/img/Pasted%20image%2020251202184739.png"></p>
<p>Vemos que como sudo no funciona y esto es porque tenemos que especificar el archivo de configuración que debe usar:</p>
<p><img alt="img38" loading="lazy" src="/img/Pasted%20image%2020251202184848.png"></p>
<p>Ahora ya funciona, en este punto vamos a modificar nuevamente para mandar permisos SUID a la bash y escalar más rápido:</p>
<p><img alt="img39" loading="lazy" src="/img/Pasted%20image%2020251202184937.png"></p>
<p>Ahora ejecutamos:
<img alt="img40" loading="lazy" src="/img/Pasted%20image%2020251202184956.png"></p>
<p>Por último veamos si se asignó permisos a la <code>bash</code>:</p>
<p><img alt="img41" loading="lazy" src="/img/Pasted%20image%2020251202185028.png"></p>
<p>Perfecto ejecutemos <code>bash -p</code> :</p>
<p><img alt="img42" loading="lazy" src="/img/Pasted%20image%2020251202185048.png"></p>
<p>Ya estamos como root, vamos a ver la flag de root:</p>
<p><img alt="img43" loading="lazy" src="/img/Pasted%20image%2020251202185127.png"></p>
<p>Máquina Terminada.</p>
<p><img alt="img44" loading="lazy" src="/img/Pasted%20image%2020251202185250.png"></p>


    </div>

    <footer class="post-footer">
    </footer>
  </article>

  
  <aside id="sidebar-toc">
    <div class="sidebar-title">Contenido</div>
    <ul id="toc-list"></ul>
  </aside>
</div>

<style>
   
  .post-container {
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    position: relative;
  }

   
  .post-single {
    display: flex;
    flex-direction: column;
    justify-content: center;
    max-width: 850px;
    padding: 1rem 1rem;
  }

   
  #sidebar-toc {
    position: fixed;
    top: 11%;
    right: 20%;
    width: 260px;
    background-color: rgba(25, 25, 25, 0.95);
    border-radius: 12px;
    padding: 15px 20px;
    color: #fff;
    font-size: 14px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
    z-index: 1000;
    transition: all 0.3s ease;
  }

   
  .sidebar-title {
    font-weight: bold;
    color: #00bfff;
    margin-bottom: 10px;
    text-align: center;
  }

   
  #toc-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  #toc-list li {
    margin: 5px 0;
  }

  #toc-list li.h2 {
    margin-left: 10px;
    font-size: 13px;
  }

  #toc-list li.h3 {
    margin-left: 20px;
    font-size: 12px;
  }

  #toc-list a {
    color: #9ad0ff;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  #toc-list a:hover {
    color: #00bfff;
  }

   

   
  @media (max-width: 1700px) {
    #sidebar-toc {
      right: 15%;
      width: 220px;
      font-size: 13px;
    }
  }

   
  @media (max-width: 1440px) {

    .post-container {
      justify-content: center;
    }

    #sidebar-toc {
      position: fixed;
      top: auto;
      bottom: 20px;
      right: 10%;
      width: auto;
      padding: 10px 14px;
      background-color: rgba(0, 0, 0, 0.8);
      border-radius: 8px;
      font-size: 13px;
      max-height: none;
      overflow: visible;
      cursor: pointer;
    }

    #sidebar-toc::after {
      content: "☰ Contenido";
      color: #00bfff;
      font-weight: bold;
    }

     
    #toc-list,
    .sidebar-title {
      display: none;
    }

     
    #sidebar-toc:hover #toc-list {
      display: block;
      position: absolute;
      right: 0;
      bottom: 40px;
      width: 220px;
      background-color: rgba(25, 25, 25, 0.95);
      border-radius: 8px;
      padding: 10px;
    }

    #sidebar-toc:hover .sidebar-title {
      display: block;
      text-align: center;
      margin-bottom: 5px;
    }
  }
</style>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const content = document.querySelector(".post-content");
    const tocList = document.getElementById("toc-list");
    if (!content || !tocList) return;

    const headings = content.querySelectorAll("h1, h2, h3");
    headings.forEach((heading, index) => {
      const id = heading.id || `section-${index}`;
      heading.id = id;

      const li = document.createElement("li");
      li.classList.add(heading.tagName.toLowerCase());

      const a = document.createElement("a");
      a.href = `#${id}`;
      a.textContent = heading.textContent;

      li.appendChild(a);
      tocList.appendChild(li);
    });
  });
</script>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="http://localhost:1313/">Hack Stark ×͜×</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
